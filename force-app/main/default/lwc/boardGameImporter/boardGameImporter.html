<template>
    <div class="outer-container" style="position: relative; min-height: 100vh;">
    <template if:true={showSpinner}>
        <div class="custom-spinner-overlay">
            <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
        </div>
    </template>
    <div class="slds-grid slds-gutters_x-small slds-wrap">
        <!-- Left Side: Import Form -->
        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
            <!-- Collect Inputs -->
            <lightning-card title="BGG Import">
                <div style="min-height: 375px;" class="slds-p-horizontal_medium">
                    <lightning-combobox label="What Would You Like To Do?" value={importOptionSelected} options={importOptions} onchange={handleImportOptionChange} required></lightning-combobox>
                    <!-- Show Remaining Options if Option Selected -->
                    <template if:true={importOptionSelected}>
                        <!-- Combobox for Event Selection -->
                        <lightning-combobox label="Select Event" value={selectedEventId} options={events} onchange={handleEventChange} required></lightning-combobox>
                        <!-- Show Remaining Options if Event Id Selected -->
                        <template if:true={selectedEventId}>
                            <!-- Picklist to select Import Type -->
                            <lightning-combobox label="Import From:" value={importTypeSelected} options={importTypeOptions} onchange={handleImportTypeChange}></lightning-combobox>
                            <!-- Show Either Picklist or Text Box to Enter Collection name based on selection -->
                            <template if:true={importTypeSelected}>
                                <template if:true={showSourceSelection}>
                                    <lightning-combobox label="Select Existing Source:" value={selectedSourceValue} options={sources} onchange={handleSourceChange}></lightning-combobox>
                                </template>
                                <template if:false={showSourceSelection}>
                                    <!-- Input for Collection Name or GeekList Number -->
                                    <lightning-input label={nameOrIdLabel} value={nameOrId} placeholder={nameOrIdPlaceholder} onchange={handleNameOrIdChange} required></lightning-input>
                                </template>
                                <template if:true={nameOrId}>
                                    <!-- Option Toggles inside a Box -->
                                    <div class="slds-m-top_medium slds-m-bottom_medium">
                                        <div class="slds-text-title slds-m-bottom_small">Options</div>
                                        <div class="slds-box slds-theme_default">
                                            <div class="slds-grid slds-wrap slds-gutters_small">
                                                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                                                    <lightning-radio-group label="Import Options" name="importOptions" options={importOptions} value={getImportOption} type="radio" onchange={handleImportOptionChange}></lightning-radio-group>
                                                </div>
                                                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                                                    <lightning-input type="toggle" label="Get Expansions?" checked={getExpansions} onchange={handleGetExpansionsChange} class="slds-p-around_x-small"></lightning-input>
                                                </div>
                                                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                                                    <lightning-input type="toggle" label="Delete Removed Games?" checked={deleteRemoved} onchange={handleDeleteRemovedChange} class="slds-p-around_x-small"></lightning-input>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Submit Button -->
                                    <lightning-button label="Submit" onclick={handleSubmit} class="slds-m-top_medium"></lightning-button>
                                </template>
                            </template>
                        </template>
                    </template>
                </div>
            </lightning-card>
        </div>
        <!-- Right Side: Results -->
        <template if:true={resultsVisible}>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-3 fade-in">
                <c-board-game-import-results results={importResults}></c-board-game-import-results>
            </div>
        </template>
    </div>
    </div>
</template>
